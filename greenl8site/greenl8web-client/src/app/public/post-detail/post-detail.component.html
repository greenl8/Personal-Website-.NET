<div class="post-detail-container">
  <!-- Loading spinner -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <!-- Error message -->
  <div *ngIf="error && !loading" class="error-container">
    <mat-card>
      <mat-card-content>
        <h2>Post Not Found</h2>
        <p>Sorry, the post you are looking for does not exist or is no longer available.</p>
        <button mat-raised-button color="primary" routerLink="/">Return to Homepage</button>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Post content -->
  <div *ngIf="post && !loading && !error" class="post-content-wrapper">
    
    <!-- Back Button -->
    <div class="actions-container">
      <button mat-button (click)="goBack()" class="back-button">
        <span class="back-arrow-char">&larr;</span>
        <span>Back to Freelance Motion Designer and Visual Artist</span>
      </button>
    </div>

    <!-- Main Content Area -->
    <div class="post-main-content-area">
      
      <!-- Post Title -->
      <h1 class="post-title-main">{{ post.title }}</h1>
      
      <!-- Post Subtitle/Excerpt -->
      <p *ngIf="post.excerpt" class="post-subtitle">{{ post.excerpt }}</p>
      
      <!-- Video Player (takes priority) -->
      <div *ngIf="post.videoEmbedCode" class="video-player-container" [innerHTML]="getSafeVideoContent(post.videoEmbedCode)">
      </div>
      
      <!-- Featured Image (only if no video) -->
      <img *ngIf="!post.videoEmbedCode && post.featuredImage"
           [src]="post.featuredImage"
           [alt]="post.title"
           class="featured-image-main">

      <!-- Post actual content -->
      <div class="post-content-body" [innerHTML]="post.content"></div>
      
      <!-- Social sharing -->
      <div class="social-sharing">
        <h3>Share this:</h3>
        <button mat-stroked-button (click)="shareOnFacebook()" aria-label="Share on Facebook">
          <mat-icon><img src="assets/images/facebook.png" alt="Facebook Icon" class="social-icon-img"></mat-icon>
          <span>Facebook</span>
        </button>
        <button mat-stroked-button (click)="shareOnTwitter()" aria-label="Share on Twitter">
          <mat-icon>x</mat-icon>
          <span>X</span>
        </button>
      </div>

    </div>

    <!-- Related posts -->
    <div *ngIf="relatedPosts.length > 0" class="related-posts">
      <h2>Related Posts</h2>
      
      <div class="related-posts-grid">
        <mat-card *ngFor="let relatedPost of relatedPosts" class="related-post-card">
          <img *ngIf="relatedPost.featuredImage" 
               mat-card-image 
               [src]="relatedPost.featuredImage" 
               [alt]="relatedPost.title"
               class="related-post-image">
          
          <mat-card-header>
            <mat-card-title>
              <a [routerLink]="['/post', relatedPost.slug]">{{ relatedPost.title }}</a>
            </mat-card-title>
            <mat-card-subtitle>
              {{ relatedPost.publishedAt || relatedPost.createdAt | date:'mediumDate' }}
            </mat-card-subtitle>
          </mat-card-header>
          
          <mat-card-actions>
            <a mat-button [routerLink]="['/post', relatedPost.slug]">READ MORE</a>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </div>
</div>